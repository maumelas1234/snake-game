<!DOCTYPE html>
<html>
<head>
  <title>Snake Game</title>
  <style>
    body {
      background-color: black;
      font-family: Arial, sans-serif;
      margin: 0;
      padding: 0;
    }

    #game-container {
      display: none;
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      width: 800px;
      height: 600px;
      background-color: #000;
    }

    #intro-container {
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      width: 800px;
      height: 600px;
      background-color: #000;
      text-align: center;
      color: #fff;
    }

    #intro-title {
      font-size: 48px;
      margin-top: 200px;
    }

    #intro-button {
      font-size: 24px;
      margin-top: 50px;
      padding: 10px 20px;
      cursor: pointer;
    }

    #game-board {
      position: absolute;
      top: 0;
      left: 0;
      width: 800px;
      height: 600px;
    }

    .snake-part {
      position: absolute;
      width: 10px;
      height: 10px;
      background-color: #c70808;
    }

    .food {
      position: absolute;
      width: 10px;
      height: 10px;
      background-color: #50b2e0;
      border-radius: 50%;
    }

    #score {
      position: absolute;
      top: 10px;
      left: 10px;
      color: #fff;
      font-size: 24px;
    }
  </style>
</head>
<body>
  <div id="intro-container">
    <h1 id="intro-title">Snake Game</h1>
    <button id="intro-button" onclick="startGame()">Start Game</button>
  </div>

  <div id="game-container">
    <div id="score">Score: 0</div>
    <div id="game-board"></div>
  </div>

  <script>
    var snake = [
      {x: 200, y: 200},
      {x: 190, y: 200},
      {x: 180, y: 200},
      {x: 170, y: 200},
      {x: 160, y: 200},
    ];

    var food = {x: 400, y: 400};

    var dx = 10;
    var dy = 0;
    var changingDirection = false;

    var gameInterval;
    var introMusic;
    var score = 0;

    window.onload = function() {
      introMusic = new Audio('intro.mp3');
      introMusic.play();
    }

    function startGame() {
      document.getElementById("intro-container").style.display = "none";
      document.getElementById("game-container").style.display = "block";

      gameInterval = setInterval(gameLoop, 100);
    }

    function gameLoop() {
      if (changingDirection) {
        changingDirection = false;
      } else {
        moveSnake();
        if (checkCollision()) {
          endGame();
        }
        draw();
      }
    }

    function moveSnake() {
      const head = {x: snake[0].x + dx, y: snake[0].y + dy};

      // Wrap the snake position on edge collision
      if (head.x < 0) head.x = 790;
      if (head.x > 790) head.x = 0;
      if (head.y < 0) head.y = 590;
      if (head.y > 590) head.y = 0;

      snake.unshift(head);

      // Check for food collision
      if (head.x === food.x && head.y === food.y) {
        eatFood();
      } else {
        snake.pop();
      }
    }

    function checkCollision() {
      // Check for collision with itself
      for (let i = 4; i < snake.length; i++) {
        if (snake[i].x === snake[0].x && snake[i].y === snake[0].y) {
          return true;
        }
      }
      return false;
    }

    function draw() {
      const gameBoard = document.getElementById("game-board");
      gameBoard.innerHTML = "";

      // Draw snake
      snake.forEach(part => {
        const snakePart = document.createElement("div");
        snakePart.classList.add("snake-part");
        snakePart.style.left = part.x + "px";
        snakePart.style.top = part.y + "px";
        gameBoard.appendChild(snakePart);
      });

      // Draw food
      const foodElement = document.createElement("div");
      foodElement.classList.add("food");
      foodElement.style.left = food.x + "px";
      foodElement.style.top = food.y + "px";
      gameBoard.appendChild(foodElement);
    }

    function eatFood() {
      score += 10;
      document.getElementById("score").innerText = "Score: " + score;
      
      const newFoodX = Math.floor(Math.random() * 80) * 10;
      const newFoodY = Math.floor(Math.random() * 60) * 10;
      food = {x: newFoodX, y: newFoodY};
    }

    function endGame() {
      clearInterval(gameInterval);
      alert("Game over! Your score was: " + score);
      document.location.reload();
    }

    function changeDirection(e) {
      if (changingDirection) return;
      changingDirection = true;

      const keyPressed = e.keyCode;
      const goingUp = dy === -10;
      const goingDown = dy === 10;
      const goingRight = dx === 10;
      const goingLeft = dx === -10;

      switch (keyPressed) {
        case 37:
          if (!goingRight) {
            dx = -10;
            dy = 0;
          }
          break;
        case 38:
          if (!goingDown) {
            dx = 0;
            dy = -10;
          }
          break;
        case 39:
          if (!goingLeft) {
            dx = 10;
            dy = 0;
          }
          break;
        case 40:
          if (!goingUp) {
            dx = 0;
            dy = 10;
          }
          break;
      }
    }

    document.addEventListener("keydown", changeDirection);
  </script>
</body>
</html>